{% extends "task_managers/base.html" %}
{% load django_bootstrap5 %}

{% block header %}
<h1 class="fw-bold text-center">
    <a href="{% url 'projects' %}"
    class="link-offset-2 link-underline link-underline-opacity-0"
    >Convites pendentes</a>
</h1>
<h3 class="fw-bold text-center">Participe ou não de outros projetos!</h3>
{% endblock header %}

{%block content%}
    {% if invites %}
    <div class="row g-3">
     {% for inv in invites %}
         <div class="col-md-4 d-flex">
             <div class="card flex-fill">
                 <div class="card-body d-flex flex-column">
                    <h4 class="card-title fs-3">
                     <div class="d-flex justify-content-center align-items-center">
                        <div> 
                         <strong>{{inv.project}}</strong>
                         <span class="material-symbols-outlined">mail</span>
                        </div>
                     </div>
                    </h4>
                <div class="d-flex justify-content-between">
                {% if project.deadline%}
                <p class="card-text fw-semibold">
                {{ project.deadline }}
                </p>
                {% else %}
                <p class="card-text fw-semibold">
                Projeto sem prazo definido 
                </p>
                {% endif %}
                <p>
                Projeto de: <br> <strong>{{inv.project.owner}}</strong>
                </p>
            </div>
                    <div class="d-flex justify-content-between">
                        <form action="{% url 'invites_accept' inv.pk %}" method="post">
                        {% csrf_token %}
                            <button type="submit" class="btn btn-outline-primary">Aceitar</button>
                        </form>
                        <form action="{% url 'invites_reject' inv.pk %}" method="post">
                        {% csrf_token %}
                            <button type="submit" class="btn btn-outline-danger">Rejeitar</button>
                        </form>
                    </div>
                </div>
            </div>
         </div>
     {% endfor %}    
    </div>
    {% else %}
        <p class="text-center m-5">Você não tem convites pendentes!</p>
    {% endif %}
{% endblock%}